# 入门16-通过购买包年实例显著降低成本

> 如果我们使用云上资源的需求是明确而持续的，那么就应该购买包年实例（Reserved Instance），土豪除外。正如每个人的手机都有一个套餐，这样做的好处是：
> 我们可以拿到按需实例3折左右的价格来长期运行我们的工作负载，而不需要频繁关机。
> -- D.C

我们知道AWS有三种实例类型：按需实例（单价最高），预留实例（便宜，包1/3年），竞价实例（便宜，可能被中断）。

这里简单介绍下这几种类型吧：

- 按需实例： 随用随开，用完就关。自由不羁的同时要付出代(高)价。

- 预留实例： 稳扎稳打，包1年或三年，拿最低折扣。（平均到3折）

- 竞价实例： 竞价方式取得空闲资源使用权，不需要承诺包年，同时价格只比预留高一点点，可以说是兼顾了自由不羁的使用+稳扎稳打的价格，但是。。。重要的事情说三遍，空闲资源如果被系统收回，运行的任务会被中断。因此适用于分析时间不长的任务，或者自己做好了中断后重跑的调度系统，如此这般竞价实例是最适合的。

好了废话不多说，本文介绍的是如何在aws console控制面板上购买预留实例，老用户直接点右上方的X关闭，你们用的比我熟 :)


## 购买EC2预留实例

- 登录web界面，进入EC2控制台,点击左侧导航栏的Reserve Instance（预留实例），如果我们以前没有买过，那么这个右侧的购买列表是空空如也。如果有买过就会显示出购买机器的到期时间等信息。

![ec2][1]

- 点击按钮 Purchase Reserved Instances（购买预留实例）。

![ri][2]

- 随后在跳出来的界面上选择我们要买的机器信息，选择搜索，出来价格以后，修改所要购买的台数，加入购物车。

Platform： 系统选择，windows，linux等

Tenancy: 默认就好

Offering Class: _Standard_（标准）还是 _可转换_（convertible）, 区别是，假如我买了c系列的机型c5.2xlarge，前者（标准）允许我在同样的c系列机型中进行自动资源匹配,例如我可以开两台c5.xlarge同样享受包年的折扣价；后者（可转换）除了同系列机型外，还允许我在其他机型例如r系列或m系列机型进行自动资源匹配。说到这里有同学肯定说，那我肯定买可转换啊，自由嘛，太天真了骚年，任何自由都是有代价的，可转换的价格会比标准贵哦~

Instance Type： 没什么好说的，选择你要买的机型。

Term： 这个很关键了，买一年还是买三年，三年的折扣灰常大哦~

Payment Option： No Upfront(无预付，折算到每月支付，后付费)；Partial Upfront（预付部分，剩余的折算到每月支付，后付费）；All Upfront（全预付，一次性付清，最便宜）

![chose][3]

- ok，各位亲们购物车添加完毕之后，可以点击 _查看购物车_ 出来下面的界面,显示了我们上一步所选的信息（PS: r5.4xlarge = 16vCPU, 128G内存）。注意这里有个tip，就是有个 _Order On(订购时间)_ 选项。

![check][4]

- 点击 _Order On(订购时间)_ 进去可以选择这个机器购买生效的时间，比如我在6月1号订购但是希望在6月28号0点开始生效。有同学要问了，这个东西有什么用呢？嗯。。。试想某公司1月买了3台，过了十几天又买了3台，下个月又买了3台，都是包一年，那么在明年的对应时间点，是不是要分别下三次单，多麻烦啊！有了这个功能，我就可以一次下单把机器都买了，设定好生效时间，也不会浪费去年花出去的银子。这里还是要赞一下AWS 客户至上的企业文化。

![validtime][5]

- OK, 确认信息无误，生效时间也设好了（默认是下单的那一刻起生效），那就点击下单吧，Order！之后就可以在预留实例界面看到我买的机器了。

![order][6]

- 最后一步，把买的机器都开起来，开始我的AWS云端征程！

## 购买其他包年实例

请参考EC2的实例购买方式，对应的服务控制台左侧导航栏都会有 _预留实例_ 的按钮来供我们购买。

如有其他不清楚的，也可以在群里问各位骨灰级大神。

EC2价格参考：[点我](amazonaws.cn/ec2/pricing/?nc1=h_ls)

> 不必为了用电灯，而去造一座发电厂，云也是如此。
